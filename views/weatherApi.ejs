<!-- weatherApi.ejs -->

<!DOCTYPE html>
<html>
  <head>
    <title>Weather App</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    />
  </head>
  <body class="bg-secondary">
    <div class="container">
      <h1 class="m-3 text-white">Weather App using NodeJS</h1>
      <form action="/weather" method="get">
        <div class="input-group">
          <input
            class="form-control"
            type="text"
            name="city"
            placeholder="Enter city name"
          />
          <button type="submit" class="btn btn-primary">Get Weather</button>
        </div>
      </form>

      <% if (error) { %>
      <div class="alert alert-danger mt-3" role="alert"><%= error %></div>
      <% } else if (weather) { %>
      <!-- Рендерим данные погоды -->
      <div class="card mt-4">
        <div class="list-group list-group-flush">
          <p class="list-group-item">
            <i class="fas fa-thermometer-half"></i>
            <%= weather.main.temp %>&deg;F
          </p>
          <p class="list-group-item">
            <i class="fas fa-cloud"></i>
            <%= weather.weather[0].main %>
          </p>
          <p class="list-group-item">
            <i class="fas fa-map-marker-alt"></i>
            <%= weather.name %>, <%= weather.sys.country %> <%= weather.timezone
            %>,
          </p>
          <p class="list-group-item">
            <i class="fas fa-map-marker-alt"></i>
            lon: <%= weather.coord.lon %> lan: <%= weather.coord.lat %>
          </p>
          <p class="list-group-item">
            <i class="fas fa-map-marker-alt"></i>
            feels like: <%= weather.main.feels_like %>
          </p>
          <p class="list-group-item">
            <i class="fas fa-map-marker-alt"></i>
            humidity: <%= weather.main.humidity %>
          </p>
          <p class="list-group-item">
            <i class="fas fa-cloud"></i>
            pressure: <%= weather.main.pressure %>
          </p>
          <p class="list-group-item">
            <i class="fas fa-map-marker-alt"></i>

            country code: <%= weather.sys.country %>
          </p>
          <p class="list-group-item">
            <i class="fas fa-map-marker-alt"></i>

            wind speed: <%= weather.wind.speed %>
          </p>
          <p class="list-group-item">
            <i class="fas fa-cloud"></i> Rain Volume: <%= weather.rain ?
            weather.rain['1h'] : 'undefined' %>
          </p>
        </div>
      </div>

      <% } %>
    </div>
  </body>
</html>
